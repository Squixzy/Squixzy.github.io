<!doctype html>

<html lang="en">
<head>
	<!--+===================================================================+
	 				header
	+====================================================================+-->

	<!--+=========+
	   metadata
	+==========+-->
	<meta charset="UTF-8">
	<meta name="author" content="Saxon Glaser">
	<meta name="description" content=" A Hue, Saturation, Lightness (HSL) color mixer">
	<meta name="keywords" content="HSL,Hue,Saturation,Lightness,Colors,Mixer">

	<!--+=========+
	     links
	+==========+-->
	<link href="https://fonts.googleapis.com/css?family=Roboto:100" rel="stylesheet">
	<link rel='shortcut icon' href='favicon.png'>
	<title>HueSaturationLightness.com</title>

	<!--+============================+
	 	     stylesheets
	+=============================+-->
	<style>
	* {
	margin:0px auto;
	}
	*::-webkit-scrollbar {
	display: none;
	}
	#pallette{
	position: absolute;
  	width: 200%;
    	height: 200%;
	}
	#center {
    	font-family:'Roboto';
    	color:white;
    	position: fixed;
    	left: 50%;
    	top: 50%;
    	font-size: 4.1em;
    	-webkit-transform: translate(-50%, -50%);
    	transform: translate(-50%, -50%);
    	user-select: none;
	}
	#QuestionMark {
	position:fixed;
	bottom: 0.5em;
	left: 0.5em;
	color:white;
	font-family:'Roboto';
	font-size: 0.9em;
	cursor: pointer;
	user-select: none;
	}
	#span {
	font-size: 0.9em;
	cursor: default;
	user-select: none;
	}
	</style>
</head>

<body>
	<!--+===================================================================+
	 				  body
	+====================================================================+-->

	<div id="pallette" onmousemove="moveMouse(event)" onclick="clickMouse()" >
		<p id="center"></p>
	</div>
	<p id="QuestionMark" onclick="questionMarkClick()">?<span id="span"></span></p>

	<!--+============================+
	  	     javascript
	+=============================+-->
<script src='keypress.js' type='text/javascript'></script>
<script>

//Define Global Variables
var globalHue = 0;
var globalSaturation = 0;
var globalLightness = 0;
var globalColorFreezeVal = 0;
var globalExplanationVal = 0;
var listener = new window.keypress.Listener();

//Inital Actions
window.scrollTo(Math.round(window.innerWidth/2),Math.round(window.innerHeight/2));
window.addEventListener("scroll",scrollMouse);

listener.sequence_combo("up up down down left right left right b a", function() {
 document.getElementById('QuestionMark').innerHTML = ' @Nnokalad';
}, true);

listener.sequence_combo("m a r k", function() {
 document.getElementById('QuestionMark').innerHTML = ' Credit to @Oreoshoes who made the favicon';
}, true);


//Functions
function changeBGColor(hue,saturation,lightness) {
	var Background = document.getElementById('pallette');
	if (globalColorFreezeVal == 0) {
		Background.style.backgroundColor = 'hsl(' + Math.round(globalHue) + ',' + globalSaturation + '%,' + globalLightness + '%)';
	} else if (globalColorFreezeVal == 1) {
		return null;
	}
}

function changeDisplayValue() {
	var centerText = document.getElementById('center');
	if (globalColorFreezeVal == 0) {
		centerText.innerHTML = 'hsl: ' + Math.round(globalHue) + 'Ëš ' + globalSaturation + '% ' + globalLightness + '%';
	} else if (globalColorFreezeVal == 1) {
		return null;
	}
}

function moveMouse(event) {
	var mousePercentX = Math.round(event.clientX/(window.innerWidth - 5 ) * 100);
	var mousePercentY = Math.round(event.clientY/(window.innerHeight - 5 ) * 100);

	globalSaturation = mousePercentY;
	globalLightness = mousePercentX;

	changeBGColor(globalHue,globalSaturation,globalLightness);
	changeDisplayValue();
}

function scrollMouse() {
	var windowMiddleY = Math.round(window.innerHeight/2);
	var windowMiddleX = Math.round(window.innerWidth/2);
	var windowsPositionY = document.body.scrollTop;
	var windowsPositionX = document.body.scrollLeft;
	var centerText = document.getElementById('center');

	if (windowsPositionY > windowMiddleY) {
		changeGlobalHue(0.5);
	} else if (windowsPositionY < windowMiddleY) {
		changeGlobalHue(-0.5);
	}
	if (windowsPositionX > windowMiddleX) {}
	else if (windowsPositionX < windowMiddleX) {}

	window.scrollTo(windowMiddleX,windowMiddleY);
	changeBGColor(globalHue,globalSaturation,globalLightness);
	changeDisplayValue();
}

function changeGlobalHue(amount) {
	if (globalHue >= 360) {
		globalHue = 0;
	} else if (globalHue < 0) {
		globalHue = 360;
	}
	globalHue = globalHue + (amount);
}

function clickMouse() {
	if (globalColorFreezeVal == 0) {
		globalColorFreezeVal = 1;
	} else if (globalColorFreezeVal == 1) {
		globalColorFreezeVal = 0;
	}
}

function questionMarkClick() {
	if (globalExplanationVal == 0) {
		document.getElementById('span').innerHTML = " This is a hue, saturation, lightness color mixer. Scoll to change the Hue. Use the mouse to change the colors saturation and lightness. Click to keep the current color.";
		globalExplanationVal = 1;
	} else if (globalExplanationVal == 1) {
		document.getElementById('span').innerHTML = "";
		globalExplanationVal = 0;
	}
}
</script>
</body>
</html>
